name: Auto reply for qna category

on:
  discussion:
    types: [created]

permissions:
  contents: read
  discussions: write

jobs:
  auto-reply:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/github-script@v7
        with:
          script: |
            const discussion = context.payload.discussion;

            if (discussion.category.name !== 'Q&A') {
              return;
            }

            const mutation = `
              mutation($discussionId: ID!, $body: String!) {
                addDiscussionComment(input: {
                  discussionId: $discussionId,
                  body: $body
                }) {
                  comment {
                    id
                  }
                }
              }
            `;

            await github.graphql(mutation, {
              discussionId: discussion.node_id,
              body: `안녕하세요. Npay 입니다.

            문의가 접수되었습니다.
            확인하는대로 답변드리겠습니다.
            
            감사합니다.`
                        });
